<!DOCTYPE html>
{% load static %}
<head>
  <title>LolTourney | Tournament 1</title>
  {% include 'head.html' %}
  <script type="text/javascript" src="{% static 'js/jquery.bracket.min.js'%}"></script>
  <link rel="stylesheet" type="text/css" href="{% static 'css/jquery.bracket.min.css' %}" />
</head>
<body>
  <script type="text/javascript">
      var minimalData = {
          teams : [
            ["Team 1", "Team 2"], /* first matchup */
            ["Team 3", "Team 4"],  /* second matchup */
            ["Team 5", "Team 6"],
            ["Team 7", "Team 8"],
            ["Team 9", "Team 10"],
            ["Team 11", "Team 12"],
            ["Team 13", "Team 14"],
            ["Team 15", null]
          ],
          results : [
            [[4,3,'Match 1'], [3,4], , [1,3]],       /* first round */
            [[4,6], [2,1]]        /* second round */
          ]
        }

      $(function() {
          $('#minimal .demo').bracket({
            init: minimalData /* data to initialize the bracket with */ })
        })

  </script>
  <div class="container-fluid">
    {% include 'navbar.html'%}
    <div class="col-md-12">

      <h1>Tournament: {{ tournament.tournament_name}}</h1>
      <h3>Key: {{tournament.tournament_key}}</h3>
      <hr />
      <div id="minimal" >
        <div class="demo">

        </div>
      </div>
      {% if not tournament.teams_created %}
      <p>
        Players:
        <ul>
          {% for player in tournament.players.all%}
          <li>
            {{player.lol_summoner_name}} {%if player.user == request.user %}<a href="{% url 'remove_user' tournament_id=tournament.id %}">remove me</a>{%endif%}
          </li>
          {%endfor%}
        </ul>
        <p>
          Teams not set yet. Come back after deadline!
          {% if main_user == True %}
          <form method="post" action=".">
            {%csrf_token%}
            <input type="submit" name="create_teams" />
          </form>
          {% endif %}
        </p>
      {% else %}
        Teams:
        <ul>
          {% for team in tournament.teams.all %}
          <li>
            {{team.team_name}}
          </li>
          {% endfor %}
        </ul>
      </p>
      <p>
        {% if request.user == tournament.main_user %}
        <form method="post" action=".">
          {% csrf_token %}
          <input type="text" placeholder="Match Number" />
          <input type="text" placeholder="Winner" />
          <input type="submit" name="update_bracket" />
        </form>
        {% endif %}
      </p>
      {% endif %}
    </div>
  </div>
</body>
